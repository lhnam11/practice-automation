package Day1_Locators;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;

public class Locators {
	public static WebDriver openBrowser() {
		System.setProperty("webdriver.chrome.driver", "D:\\LeHoaiNam\\Selenium\\chromedriver.exe");

		WebDriver driver = new ChromeDriver();

		driver.manage().window().maximize();
		return driver;
	}

	public static void login(WebDriver driver, String email, String password) throws Exception {
		driver.navigate().to("https://anhtester.com");
		WebElement button_Login = driver.findElement(By.id("btn-login"));
		button_Login.click();

		WebElement input_Email = driver.findElement(By.cssSelector("input[placeholder='Email']"));
		input_Email.sendKeys(email);
		Thread.sleep(1000);
		WebElement input_PassWord = driver.findElement(By.name("password"));
		input_PassWord.sendKeys(password);
		Thread.sleep(1000);
		WebElement button_LoginAcccount = driver.findElement(By.id("login"));
		button_LoginAcccount.click();
		Thread.sleep(1000);
		// láº¥y tá»« div Ä‘áº§u tiÃªn sáº½ ra káº¿t quáº£ Ä‘Ã³
		WebElement tagName = driver.findElement(By.tagName("p"));
		String pText = tagName.getText();
		System.out.println(pText);
		Thread.sleep(3000);
	}

	public static String getLoginResult(WebDriver driver) {
		try {// vÃ­ dá»¥: náº¿u login tháº¥t báº¡i sáº½ hiá»‡n alert-danger
			WebElement errorMessage = driver.findElement(By.className("alert-danger"));
			return "Login tháº¥t báº¡i:" + errorMessage.getText();
		} catch (Exception e) {
			// náº¿u khÃ´ng tháº¥y thÃ´ng bÃ¡o lá»—i, cÃ³ thá»ƒ login thÃ nh cÃ´ng
			try {
				WebElement profileMenu = driver.findElement(By.xpath("//div[contains(@class,'dropdown-profile')]"));
				return "âœ… Login thÃ nh cÃ´ng";
			} catch (Exception ex) {
				return "khÃ´ng xÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c káº¿t quáº£ ";
			}

		}
	}

	public static void openShopeeAndClickSignUp(WebDriver driver) throws Exception {
	    driver.navigate().to("https://shopee.vn/");

	    // Äá»£i Ä‘á»ƒ trang load hoÃ n toÃ n
	    Thread.sleep(10000);

	    WebDriverWait wait = new WebDriverWait(driver, 10);

	    WebElement signUpLink = wait.until(ExpectedConditions.elementToBeClickable(
	        By.cssSelector(".navbar__link.navbar__link--signup.navbar__link--tappable.navbar__link-text.navbar__link-text--medium.navbar__link-text--normal-case")
	    ));

	    // ğŸ‘‰ Chá» thÃªm Ä‘á»ƒ báº¡n nhÃ¬n tháº¥y vá»‹ trÃ­ nÃºt Ä‘Äƒng kÃ½
	    System.out.println("ğŸ•’ Äang hiá»ƒn thá»‹ trang chá»§ Shopee...");
	    Thread.sleep(7000); // Chá» 7 giÃ¢y trÆ°á»›c khi click

	    signUpLink.click();
//
	    System.out.println("âœ… ÄÃ£ click vÃ o nÃºt ÄÄƒng kÃ½ cá»§a Shopee.");
	    Thread.sleep(5000); // Äá»£i thÃªm Ä‘á»ƒ tháº¥y káº¿t quáº£ click
	}
//	public static void openShopeeAndClickSignUp(WebDriver driver) throws Exception {
//	    driver.navigate().to("https://shopee.vn/");
//
//	    // Äá»£i Ä‘á»ƒ trang load hoÃ n toÃ n
//	    Thread.sleep(10000);
//
//	    WebDriverWait wait = new WebDriverWait(driver, 10);
//
//	    WebElement signUpLink = wait.until(ExpectedConditions.elementToBeClickable(
//	        By.cssSelector(".navbar__link.navbar__link--signup.navbar__link--tappable.navbar__link-text.navbar__link-text--medium.navbar__link-text--normal-case")
//	    )); náº¿u trÃªn trang mÃ¬nh má»Ÿ lÃªn chÆ°a load Ä‘Æ°á»£c ná»™i dung cáº§n tÃ¬m thÃ¬ dÃ¹ng wait.until sáº½ ngon hÆ¡n,

//
//	    // ğŸ‘‰ Chá» thÃªm Ä‘á»ƒ báº¡n nhÃ¬n tháº¥y vá»‹ trÃ­ nÃºt Ä‘Äƒng kÃ½
//	    System.out.println("ğŸ•’ Äang hiá»ƒn thá»‹ trang chá»§ Shopee...");
//	    Thread.sleep(7000); // Chá» 7 giÃ¢y trÆ°á»›c khi click
//
//	    signUpLink.click();
//
//	    System.out.println("âœ… ÄÃ£ click vÃ o nÃºt ÄÄƒng kÃ½ cá»§a Shopee.");
//	    Thread.sleep(5000); // Äá»£i thÃªm Ä‘á»ƒ tháº¥y káº¿t quáº£ click
//	}
	public static void main(String[] args) throws Exception {
		// VÃ­ dá»¥ má»Ÿ Shopee vÃ  báº¥m nÃºt Ä‘Äƒng kÃ½
		WebDriver driver = openBrowser();
		try {
	        openShopeeAndClickSignUp(driver);
		} catch (Exception e) {
			System.out.println("âŒ Lá»—i khi má»Ÿ Shopee: " + e.getMessage());
		} finally {
			driver.quit();
		}

		// Pháº§n test login cÅ© cá»§a báº¡n
		String[][] testData = { { "tada@gmail.com", "sai máº­t kháº©u" }, { "email_sai@gmail.com", "123456" }, { "", "" },
				{ "nvhoainam126@gmail.com", "123456" }, // giáº£ sá»­ Ä‘Ãºng
		};

		for (int i = 0; i < testData.length; i++) {
			System.out.println("ğŸ”µ Running testcase #" + (i + 1));
			System.out.println("ğŸ“§ Email: " + testData[i][0]);
			System.out.println("ğŸ”‘ Password: " + testData[i][1]);

			driver = openBrowser();
			try {
				login(driver, testData[i][0], testData[i][1]);
				String result = getLoginResult(driver);
				System.out.println("ğŸ“¢ Káº¿t quáº£: " + result);
			} catch (Exception e) {
				System.out.println("âŒ Lá»—i khi cháº¡y testcase: " + e.getMessage());
			} finally {
				driver.quit();
				System.out.println("--------------------------------------------------");
			}
		}
	}

}
