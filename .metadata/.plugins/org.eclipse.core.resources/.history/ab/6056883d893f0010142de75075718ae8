package Day1_Locators;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;

public class Locators  {
	public static WebDriver openBrowser() {
		System.setProperty("webdriver.chrome.driver", "D:\\LeHoaiNam\\Selenium\\chromedriver.exe");

		WebDriver driver = new ChromeDriver();

		driver.manage().window().maximize();
		return driver;
	}

	public static void login(WebDriver driver, String email, String password) throws Exception {
		driver.navigate().to("https://anhtester.com");
		WebElement button_Login = driver.findElement(By.id("btn-login"));
		button_Login.click();

		WebElement input_Email = driver.findElement(By.name("email"));
		input_Email.sendKeys(email);
		Thread.sleep(1000);
		WebElement input_PassWord = driver.findElement(By.name("password"));
		input_PassWord.sendKeys(password);
		Thread.sleep(1000);
		WebElement button_LoginAcccount = driver.findElement(By.id("login"));
		button_LoginAcccount.click();
		Thread.sleep(1000);
		// l·∫•y t·ª´ div ƒë·∫ßu ti√™n s·∫Ω ra k·∫øt qu·∫£ ƒë√≥ 
		WebElement tagName = driver.findElement(By.tagName("p"));
		String pText = tagName.getText();
		System.out.println(pText);
		Thread.sleep(3000);
	}

	public static String getLoginResult(WebDriver driver) {
		try {// v√≠ d·ª•: n·∫øu login th·∫•t b·∫°i s·∫Ω hi·ªán alert-danger
			WebElement errorMessage = driver.findElement(By.className("alert-danger"));
			return "Login th·∫•t b·∫°i:" + errorMessage.getText();
		} catch (Exception e) {
			// n·∫øu kh√¥ng th·∫•y th√¥ng b√°o l·ªói, c√≥ th·ªÉ login th√†nh c√¥ng
			try {
				WebElement profileMenu = driver.findElement(By.xpath("//div[contains(@class,'dropdown-profile')]"));
				return "‚úÖ Login th√†nh c√¥ng";
			} catch (Exception ex) {
				return "kh√¥ng x√°c ƒë·ªãnh ƒë∆∞·ª£c k·∫øt qu·∫£ ";
			}

		}
	}
	public static void openShopeeAndClickSignUp(WebDriver driver) throws Exception {
	    driver.navigate().to("https://shopee.vn/");
	    
	    // Ch·ªù ph·∫ßn t·ª≠ xu·∫•t hi·ªán
	    WebDriverWait wait = new WebDriverWait(driver, 10);
	    
	    // D√πng CSS Selector nh∆∞ b·∫°n cung c·∫•p
	    WebElement signUpLink = wait.until(ExpectedConditions.elementToBeClickable(
	        By.cssSelector(".navbar__link.navbar__link--signup.navbar__link--tappable.navbar__link-text.navbar__link-text--medium.navbar__link-text--normal-case")
	    ));

	    signUpLink.click();

	    System.out.println("‚úÖ ƒê√£ click v√†o n√∫t ƒêƒÉng k√Ω c·ªßa Shopee.");
	    Thread.sleep(3000); // ƒë·ª£i ƒë·ªÉ th·∫•y k·∫øt qu·∫£
	}
	public static void main(String[] args) throws Exception {
	    // V√≠ d·ª• m·ªü Shopee v√† b·∫•m n√∫t ƒëƒÉng k√Ω
	    WebDriver driver = openBrowser();
	    try {
	        openShopeeAndClickSignUp(driver);
	    } catch (Exception e) {
	        System.out.println("‚ùå L·ªói khi m·ªü Shopee: " + e.getMessage());
	    } finally {
	        driver.quit();
	    }

//	    // Ph·∫ßn test login c≈© c·ªßa b·∫°n
//	    String[][] testData = {
//	        {"tada@gmail.com", "sai m·∫≠t kh·∫©u"},
//	        {"email_sai@gmail.com", "123456"},
//	        {"", ""},
//	        {"nvhoainam126@gmail.com", "123456"}, // gi·∫£ s·ª≠ ƒë√∫ng
//	    };
//
//	    for (int i = 3; i < testData.length; i++) {
//	        System.out.println("üîµ Running testcase #" + (i + 1));
//	        System.out.println("üìß Email: " + testData[i][0]);
//	        System.out.println("üîë Password: " + testData[i][1]);
//
//	        driver = openBrowser();
//	        try {
//	            login(driver, testData[i][0], testData[i][1]);
//	            String result = getLoginResult(driver);
//	            System.out.println("üì¢ K·∫øt qu·∫£: " + result);
//	        } catch (Exception e) {
//	            System.out.println("‚ùå L·ªói khi ch·∫°y testcase: " + e.getMessage());
//	        } finally {
//	            driver.quit();
//	            System.out.println("--------------------------------------------------");
//	        }
//	    }
	}

}
